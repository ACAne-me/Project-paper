{"remainingRequest":"G:\\biyesheji\\front\\front\\node_modules\\babel-loader\\lib\\index.js!G:\\biyesheji\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\biyesheji\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\biyesheji\\front\\front\\src\\components\\FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\biyesheji\\front\\front\\src\\components\\FileUpload.vue","mtime":1710774353000},{"path":"G:\\biyesheji\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\biyesheji\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\biyesheji\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\biyesheji\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3RvcmFnZSBmcm9tICJAL2NvbW1vbi9zdG9yYWdlIjsKaW1wb3J0IGNvbmZpZyBmcm9tICJAL2NvbmZpZy9jb25maWciOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhc2VVcmw6IGNvbmZpZy5iYXNlVXJsLAogICAgICAvLyDmn6XnnIvlpKflm74KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOafpeeci+Wkp+WbvgogICAgICBkaWFsb2dJbWFnZVVybDogIiIsCiAgICAgIC8vIOe7hOS7tua4suafk+WbvueJh+eahOaVsOe7hOWtl+aute+8jOacieeJueauiuagvOW8j+imgeaxggogICAgICBmaWxlTGlzdDogW10sCiAgICAgIGZpbGVVcmxMaXN0OiBbXSwKICAgICAgbXlIZWFkZXJzOiB7fQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICB0aXA6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgYWN0aW9uOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKCiAgICAvKuWbvueJh+Wkp+WwjyovCiAgICBsaW1pdDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDMgLy9rYgoKICAgIH0sCiAgICBtdWx0aXBsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGZpbGVVcmxzOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLm15SGVhZGVycyA9IHsKICAgICAgJ1Rva2VuJzogc3RvcmFnZS5nZXQoImZyb250VG9rZW4iKQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBmaWxlVXJsczogZnVuY3Rpb24gZmlsZVVybHModmFsLCBvbGRWYWwpIHsKICAgICAgLy8gICBjb25zb2xlLmxvZygibmV3OiAlcywgb2xkOiAlcyIsIHZhbCwgb2xkVmFsKTsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g6K6h566X5bGe5oCn55qEIGdldHRlcgogICAgZ2V0QWN0aW9uVXJsOiBmdW5jdGlvbiBnZXRBY3Rpb25VcmwoKSB7CiAgICAgIHJldHVybiB0aGlzLmJhc2VVcmwgKyB0aGlzLmFjdGlvbjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMlgogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgaWYgKHRoaXMuZmlsZVVybHMpIHsKICAgICAgICB0aGlzLmZpbGVVcmxMaXN0ID0gdGhpcy5maWxlVXJscy5zcGxpdCgiLCIpOwogICAgICAgIHZhciBmaWxlQXJyYXkgPSBbXTsKICAgICAgICB0aGlzLmZpbGVVcmxMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIgdXJsID0gaXRlbTsKICAgICAgICAgIHZhciBuYW1lID0gaW5kZXg7CiAgICAgICAgICB2YXIgZmlsZSA9IHsKICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgdXJsOiB1cmwKICAgICAgICAgIH07CiAgICAgICAgICBmaWxlQXJyYXkucHVzaChmaWxlKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNldEZpbGVMaXN0KGZpbGVBcnJheSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZVVwbG9hZChmaWxlKSB7fSwKICAgIC8vIOS4iuS8oOaWh+S7tuaIkOWKn+WQjuaJp+ihjAogICAgaGFuZGxlVXBsb2FkU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlVXBsb2FkU3VjY2VzcyhyZXMsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGlmIChyZXMgJiYgcmVzLmNvZGUgPT09IDApIHsKICAgICAgICBmaWxlTGlzdFtmaWxlTGlzdC5sZW5ndGggLSAxXVsidXJsIl0gPSAidXBsb2FkLyIgKyBmaWxlLnJlc3BvbnNlLmZpbGU7CiAgICAgICAgdGhpcy5zZXRGaWxlTGlzdChmaWxlTGlzdCk7CiAgICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgdGhpcy5maWxlVXJsTGlzdC5qb2luKCIsIikpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlm77niYfkuIrkvKDlpLHotKUKICAgIGhhbmRsZVVwbG9hZEVycjogZnVuY3Rpb24gaGFuZGxlVXBsb2FkRXJyKGVyciwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH5Lu25LiK5Lyg5aSx6LSlIik7CiAgICB9LAogICAgLy8g56e76Zmk5Zu+54mHCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnNldEZpbGVMaXN0KGZpbGVMaXN0KTsKICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgdGhpcy5maWxlVXJsTGlzdC5qb2luKCIsIikpOwogICAgfSwKICAgIC8vIOafpeeci+Wkp+WbvgogICAgaGFuZGxlVXBsb2FkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlVXBsb2FkUHJldmlldyhmaWxlKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPiAyKSB7CiAgICAgICAgd2luZG93Lm9wZW4oZmlsZS51cmwpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOmZkOWItuWbvueJh+aVsOmHjwogICAgaGFuZGxlRXhjZWVkOiBmdW5jdGlvbiBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygiXHU2NzAwXHU1OTFBXHU0RTBBXHU0RjIwIi5jb25jYXQodGhpcy5saW1pdCwgIlx1NUYyMFx1NTZGRVx1NzI0NyIpKTsKICAgIH0sCiAgICAvLyDph43mlrDlr7lmaWxlTGlzdOi/m+ihjOi1i+WAvAogICAgc2V0RmlsZUxpc3Q6IGZ1bmN0aW9uIHNldEZpbGVMaXN0KGZpbGVMaXN0KSB7CiAgICAgIHZhciBmaWxlQXJyYXkgPSBbXTsKICAgICAgdmFyIGZpbGVVcmxBcnJheSA9IFtdOyAvLyDmnInkupvlm77niYfkuI3mmK/lhazlvIDnmoTvvIzmiYDku6XpnIDopoHmkLrluKZ0b2tlbuS/oeaBr+WBmuadg+mZkOagoemqjAoKICAgICAgdmFyIHRva2VuID0gc3RvcmFnZS5nZXQoImZyb250VG9rZW4iKTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIHZhciB1cmwgPSBpdGVtLnVybC5zcGxpdCgiPyIpWzBdOwoKICAgICAgICBpZiAoIXVybC5zdGFydHNXaXRoKCJodHRwIikpIHsKICAgICAgICAgIHVybCA9IF90aGlzLmJhc2VVcmwgKyB1cmw7CiAgICAgICAgfQoKICAgICAgICB2YXIgbmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgICB2YXIgZmlsZSA9IHsKICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICB1cmw6IHVybCArICI/dG9rZW49IiArIHRva2VuCiAgICAgICAgfTsKICAgICAgICBmaWxlQXJyYXkucHVzaChmaWxlKTsKICAgICAgICBmaWxlVXJsQXJyYXkucHVzaCh1cmwpOwogICAgICB9KTsKICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVBcnJheTsKICAgICAgdGhpcy5maWxlVXJsTGlzdCA9IGZpbGVVcmxBcnJheTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 上传文件组件 -->\r\n\t\t<el-upload v-if=\"type==1\" ref=\"upload\" :action=\"getActionUrl\" list-type=\"picture-card\" :multiple=\"multiple\" :limit=\"limit\"\r\n\t\t\t:headers=\"myHeaders\" :file-list=\"fileList\" :on-exceed=\"handleExceed\" :on-preview=\"handleUploadPreview\"\r\n\t\t\t:on-remove=\"handleRemove\" :on-success=\"handleUploadSuccess\" :on-error=\"handleUploadErr\"\r\n\t\t\t:before-upload=\"handleBeforeUpload\">\r\n\t\t\t<i class=\"el-icon-plus\"></i>\r\n\t\t\t<div slot=\"tip\" class=\"el-upload__tip\" style=\"color:#838fa1;\">{{tip}}</div>\r\n\t\t</el-upload>\r\n\t\t<el-upload v-else drag ref=\"upload\" :action=\"getActionUrl\" :multiple=\"multiple\" :limit=\"limit\"\r\n\t\t\t:headers=\"myHeaders\" :file-list=\"fileList\" :on-exceed=\"handleExceed\" :on-preview=\"handleUploadPreview\"\r\n\t\t\t:on-remove=\"handleRemove\" :on-success=\"handleUploadSuccess\" :on-error=\"handleUploadErr\"\r\n\t\t\t:before-upload=\"handleBeforeUpload\">\r\n\t\t\t<i class=\"el-icon-upload\"></i>\r\n\t\t\t  <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t\t<div slot=\"tip\" class=\"el-upload__tip\" style=\"color:#838fa1;\">{{tip}}</div>\r\n\t\t</el-upload>\r\n\t\t<el-dialog :visible.sync=\"dialogVisible\" size=\"tiny\" append-to-body>\r\n\t\t\t<img width=\"100%\" v-if=\"type==1\" :src=\"dialogImageUrl\" alt>\r\n\t\t\t<video width=\"100%\" v-if=\"type==2\" :src=\"dialogImageUrl\" alt controls />\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport storage from \"@/common/storage\";\r\n\timport config from \"@/config/config\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbaseUrl: config.baseUrl,\r\n\t\t\t\t// 查看大图\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\t// 查看大图\r\n\t\t\t\tdialogImageUrl: \"\",\r\n\t\t\t\t// 组件渲染图片的数组字段，有特殊格式要求\r\n\t\t\t\tfileList: [],\r\n\t\t\t\tfileUrlList: [],\r\n\t\t\t\tmyHeaders: {}\r\n\t\t\t};\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\ttip: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\taction: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\t/*图片大小*/\r\n\t\t\tlimit: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 3 //kb\r\n\t\t\t},\r\n\t\t\tmultiple: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tfileUrls: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\ttype: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init();\r\n\t\t\tthis.myHeaders = {\r\n\t\t\t\t'Token': storage.get(\"frontToken\")\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tfileUrls: function(val, oldVal) {\r\n\t\t\t\t//   console.log(\"new: %s, old: %s\", val, oldVal);\r\n\t\t\t\tthis.init();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 计算属性的 getter\r\n\t\t\tgetActionUrl: function() {\r\n\t\t\t\treturn this.baseUrl + this.action;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 初始化\r\n\t\t\tinit() {\r\n\t\t\t\tif (this.fileUrls) {\r\n\t\t\t\t\tthis.fileUrlList = this.fileUrls.split(\",\");\r\n\t\t\t\t\tlet fileArray = [];\r\n\t\t\t\t\tthis.fileUrlList.forEach(function(item, index) {\r\n\t\t\t\t\t\tvar url = item;\r\n\t\t\t\t\t\tvar name = index;\r\n\t\t\t\t\t\tvar file = {\r\n\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\turl: url\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfileArray.push(file);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.setFileList(fileArray);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleBeforeUpload(file) {\r\n\r\n\t\t\t},\r\n\t\t\t// 上传文件成功后执行\r\n\t\t\thandleUploadSuccess(res, file, fileList) {\r\n\t\t\t\tif (res && res.code === 0) {\r\n\t\t\t\t\tfileList[fileList.length - 1][\"url\"] = \"upload/\" + file.response.file;\r\n\t\t\t\t\tthis.setFileList(fileList);\r\n\t\t\t\t\tthis.$emit(\"change\", this.fileUrlList.join(\",\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.msg);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 图片上传失败\r\n\t\t\thandleUploadErr(err, file, fileList) {\r\n\t\t\t\tthis.$message.error(\"文件上传失败\");\r\n\t\t\t},\r\n\t\t\t// 移除图片\r\n\t\t\thandleRemove(file, fileList) {\r\n\t\t\t\tthis.setFileList(fileList);\r\n\t\t\t\tthis.$emit(\"change\", this.fileUrlList.join(\",\"));\r\n\t\t\t},\r\n\t\t\t// 查看大图\r\n\t\t\thandleUploadPreview(file) {\r\n\t\t\t\tif(this.type>2){\r\n\t\t\t\t\twindow.open(file.url)\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tthis.dialogImageUrl = file.url;\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t},\r\n\t\t\t// 限制图片数量\r\n\t\t\thandleExceed(files, fileList) {\r\n\t\t\t\tthis.$message.warning(`最多上传${this.limit}张图片`);\r\n\t\t\t},\r\n\t\t\t// 重新对fileList进行赋值\r\n\t\t\tsetFileList(fileList) {\r\n\t\t\t\tvar fileArray = [];\r\n\t\t\t\tvar fileUrlArray = [];\r\n\t\t\t\t// 有些图片不是公开的，所以需要携带token信息做权限校验\r\n\t\t\t\tvar token = storage.get(\"frontToken\");\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tfileList.forEach(function(item, index) {\r\n\t\t\t\t\tvar url = item.url.split(\"?\")[0];\r\n\t\t\t\t\tif (!url.startsWith(\"http\")) {\r\n\t\t\t\t\t\turl = _this.baseUrl + url\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar name = item.name;\r\n\t\t\t\t\tvar file = {\r\n\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\turl: url + \"?token=\" + token\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfileArray.push(file);\r\n\t\t\t\t\tfileUrlArray.push(url);\r\n\t\t\t\t});\r\n\t\t\t\tthis.fileList = fileArray;\r\n\t\t\t\tthis.fileUrlList = fileUrlArray;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>"],"sourceRoot":"src/components"}]}